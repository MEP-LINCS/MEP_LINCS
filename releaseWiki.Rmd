---
params:
  manifestTableId: !r NA
---

```{r setup, include=FALSE}
library(DT)
library(plyr)
library(dplyr)
library(data.table)
library(stringr)
library(tidyr)
library(reshape2)
library(knitr)
library(synapseClient)
synapseLogin()

set.seed(4)

knitr::opts_chunk$set(echo=FALSE, message=FALSE, warning=FALSE)

manifestTableId <- params$manifestTableId
manifestTableSchema <- synGet(manifestTableId)

```

## `r manifestTableSchema@properties$name`

The file manifest for this release is available at `r manifestTableId`.

### Release Notes


```{r filesquery}
manifestTableSchemaQuery <- synTableQuery(paste("select * from ", manifestTableId))

manifestTable <- manifestTableSchemaQuery@values
```
### Annotated Data and Analysis Reports
```{r annotateddata}
manifestTable %>% 
  filter(Level %in% c(1:4, "QualityAssurance", "Analysis")) %>% 
  mutate(id=paste(id, versionNumber, sep=".")) %>%
  dcast(CellLine + StainingSet ~ Level, value.var="id", fill=NA) %>% 
  knitr::kable(format='markdown')
```

#### Raw data files
```{r rawdata, results='asis'}
manifestTable %>%
  filter(Level == 0) %>% 
  mutate(id=paste(id, versionNumber, sep=".")) %>%
  dcast(Barcode + CellLine + StainingSet + Location ~ Well, value.var="id", fill=NA) %>% 
  arrange(CellLine, Location, Barcode, StainingSet) %>% 
  knitr::kable(format='markdown')
```
